{"version":3,"sources":["components/BoxConfig.js","components/DragBox.js","components/Box.js","App.js","reportWebVitals.js","index.js"],"names":["RESIZE_LENGTH","isAvailable","width","height","guid","s4","Math","floor","random","toString","substring","getRandomColor","color","i","DragBox","isDragging","x1","y1","x2","y2","BoxConfig","id","x","y","style","fill","stroke","strokeDasharray","Box","points","className","App","useState","boxes","setBoxes","isAdding","setIsAdding","addStart","setAddStart","addEnd","setAddEnd","isShifting","setIsShifting","shiftIndex","setShiftIndex","isResizing","setIsResizing","resizingIndex","setResizeIndex","windowWidth","setWindowWidth","windowHeight","setWindowHeight","resizeWindow","window","innerWidth","innerHeight","getIndex","length","useEffect","addEventListener","removeEventListener","onDoubleClick","evt","button","moveToTopIndex","clientX","clientY","prev","next","slice","concat","push","onMouseDown","selectedIndex","console","log","undefined","startX","endX","startY","endY","onMouseMove","map","box","index","nextWidth","movementX","nextHeight","movementY","max","onMouseUp","newBox","key","addNewBox","fontSize","textAnchor","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e584bd60.chunk.js","sourcesContent":["export const MIN_WIDTH = 100;\nexport const MIN_HEIGHT = 100;\n\nexport const RESIZE_MARGIN = 5;\nexport const RESIZE_LENGTH = 20;\n\nexport function isAvailable(width, height) {\n  return width >= MIN_WIDTH && height >= MIN_HEIGHT;\n}\n\nexport function guid() {\n  function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  }\n\n  function s8() {\n    return s4() + s4();\n  }\n\n  function s12() {\n    return s4() + s4();\n  }\n\n  return s8() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s12();\n}\n\nexport function getRandomColor() {\n  var letters = '0123456789ABCDEF';\n  var color = '#';\n  for (var i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)];\n  }\n  return color;\n}\n","import * as BoxConfig from \"./BoxConfig\";\n\nexport default function DragBox({ isDragging, x1, y1, x2, y2 }) {\n  if (x1 > x2) {\n    [x1, x2] = [x2, x1];\n  }\n\n  if (y1 > y2) {\n    [y1, y2] = [y2, y1];\n  }\n\n  let width = x2 - x1;\n  let height = y2 - y1;\n  let color = BoxConfig.isAvailable(width, height) ? \"black\" : \"red\";\n\n  return isDragging ? (\n    <rect\n      id=\"dragbox\"\n      x={x1}\n      y={y1}\n      width={width}\n      height={height}\n      style={{\n        fill: \"transparent\",\n        stroke: color,\n        strokeDasharray: \"4 2\",\n      }}\n    />\n  ) : (\n    <></>\n  );\n}\n","import \"./Box.css\";\nimport { RESIZE_LENGTH, RESIZE_MARGIN } from \"./BoxConfig\";\n\nexport default function Box({ x, y, width, height, fill }) {\n  let points = `\n    ${x + width - RESIZE_MARGIN},${y + height - RESIZE_MARGIN}\n    ${x + width - (RESIZE_MARGIN + RESIZE_LENGTH)},${y + height - RESIZE_MARGIN}\n    ${x + width - RESIZE_MARGIN},${y + height - (RESIZE_MARGIN + RESIZE_LENGTH)}\n    `;\n  return (\n    <>\n      <rect\n        className=\"box\"\n        x={x}\n        y={y}\n        width={width}\n        height={height}\n        fill={fill}\n      />\n      <polygon points={points} fill={\"white\"} />\n    </>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport DragBox from \"./components/DragBox\";\nimport Box from \"./components/Box\";\nimport * as BoxConfig from \"./components/BoxConfig\";\nimport \"./App.css\";\n\nconst BUTTON_LEFT = 0;\nconst BUTTON_RIGHT = 2;\n\nexport default function App() {\n  const [boxes, setBoxes] = useState([]);\n\n  const [isAdding, setIsAdding] = useState(false);\n  const [addStart, setAddStart] = useState({ x: 0, y: 0 });\n  const [addEnd, setAddEnd] = useState({ x: 0, y: 0 });\n\n  const [isShifting, setIsShifting] = useState(false);\n  const [shiftIndex, setShiftIndex] = useState(-1);\n\n  const [isResizing, setIsResizing] = useState(false);\n  const [resizingIndex, setResizeIndex] = useState(-1);\n\n  const [windowWidth, setWindowWidth] = useState(0);\n  const [windowHeight, setWindowHeight] = useState(0);\n  let resizeWindow = () => {\n    setWindowWidth(window.innerWidth);\n    setWindowHeight(window.innerHeight);\n  };\n\n  useEffect(() => {\n    resizeWindow();\n    window.addEventListener(\"resize\", resizeWindow);\n    return () => window.removeEventListener(\"resize\", resizeWindow);\n  }, []);\n\n  function addNewBox(x1, y1, x2, y2) {\n    if (x1 > x2) {\n      [x1, x2] = [x2, x1];\n    }\n    if (y1 > y2) {\n      [y1, y2] = [y2, y1];\n    }\n    let width = x2 - x1;\n    let height = y2 - y1;\n\n    if (BoxConfig.isAvailable(width, height)) {\n      setBoxes((prev) => {\n        let newBox = {\n          key: BoxConfig.guid(),\n          x: x1,\n          y: y1,\n          width: width,\n          height: height,\n          fill: BoxConfig.getRandomColor(),\n        };\n        return [...prev, newBox];\n      });\n    }\n  }\n\n  function getIndex(x, y) {\n    for (let i = boxes.length - 1; i >= 0; i--) {\n      if (\n        boxes[i].x < x &&\n        x < boxes[i].x + boxes[i].width &&\n        boxes[i].y < y &&\n        y < boxes[i].y + boxes[i].height\n      )\n        return i;\n    }\n  }\n\n  function handleDoubleClick(evt) {\n    if (evt.button === BUTTON_LEFT) {\n      let moveToTopIndex = getIndex(evt.clientX, evt.clientY);\n      if (-1 < moveToTopIndex && moveToTopIndex < boxes.length - 1) {\n        setBoxes((prev) => {\n          let next = prev\n            .slice(0, moveToTopIndex)\n            .concat(prev.slice(moveToTopIndex + 1));\n          next.push(prev[moveToTopIndex]);\n          return next;\n        });\n      }\n    }\n  }\n\n  function handleMouseDown(evt) {\n    if (evt.button === BUTTON_LEFT) {\n      let selectedIndex = getIndex(evt.clientX, evt.clientY);\n      console.log(selectedIndex);\n      if (selectedIndex !== undefined && selectedIndex !== -1) {\n        // SHIFT\n        let startX =\n          boxes[selectedIndex].x +\n          boxes[selectedIndex].width -\n          BoxConfig.RESIZE_LENGTH -\n          BoxConfig.RESIZE_MARGIN;\n        let endX = startX + BoxConfig.RESIZE_LENGTH + BoxConfig.RESIZE_MARGIN;\n        let startY =\n          boxes[selectedIndex].y +\n          boxes[selectedIndex].height -\n          BoxConfig.RESIZE_LENGTH -\n          BoxConfig.RESIZE_MARGIN;\n        let endY = startY + BoxConfig.RESIZE_LENGTH + BoxConfig.RESIZE_MARGIN;\n        if (\n          startX < evt.clientX &&\n          evt.clientX < endX &&\n          startY < evt.clientY &&\n          evt.clientY < endY\n        ) {\n          // Resize\n          setIsResizing(true);\n          setResizeIndex(selectedIndex);\n        } else {\n          // Shift\n          setIsShifting(true);\n          setShiftIndex(selectedIndex);\n        }\n      }\n    }\n    if (evt.button === BUTTON_RIGHT) {\n      setIsAdding(true);\n      setAddStart({ x: evt.clientX, y: evt.clientY });\n      setAddEnd({ x: evt.clientX, y: evt.clientY });\n    }\n  }\n\n  function handleMouseOver(evt) {\n    if (isResizing) {\n      setBoxes((prev) => {\n        let next = prev.map((box, index) => {\n          if (index === resizingIndex) {\n            let nextWidth = box.width + evt.movementX;\n            let nextHeight = box.height + evt.movementY;\n            return {\n              ...box,\n              width: Math.max(nextWidth, BoxConfig.MIN_WIDTH),\n              height: Math.max(nextHeight, BoxConfig.MIN_HEIGHT),\n            };\n          } else {\n            return box;\n          }\n        });\n\n        return next;\n      });\n    }\n    if (isShifting) {\n      setBoxes((prev) => {\n        let next = prev.map((box, index) => {\n          if (index === shiftIndex) {\n            return {\n              ...box,\n              x: box.x + evt.movementX,\n              y: box.y + evt.movementY,\n            };\n          } else {\n            return box;\n          }\n        });\n\n        return next;\n      });\n    }\n    if (isAdding) {\n      setAddEnd({ x: evt.clientX, y: evt.clientY });\n    }\n  }\n\n  function handleMouseUp(evt) {\n    // console.log(`Drag end on : (${evt.clientX}, ${evt.clientY})`);\n    if (evt.button === BUTTON_LEFT) {\n      setIsShifting(false);\n      setIsResizing(false);\n    }\n    if (evt.button === BUTTON_RIGHT) {\n      setIsAdding(false);\n      addNewBox(addStart.x, addStart.y, evt.clientX, evt.clientY);\n    }\n  }\n\n  return (\n    <svg\n      className=\"App\"\n      onDoubleClick={handleDoubleClick}\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseOver}\n      onMouseUp={handleMouseUp}\n    >\n      {boxes.map((box) => (\n        <Box\n          key={box.key}\n          x={box.x}\n          y={box.y}\n          width={box.width}\n          height={box.height}\n          fill={box.fill}\n        />\n      ))}\n      <text\n        fontSize={13}\n        textAnchor=\"end\"\n        x={windowWidth * 0.99}\n        y={windowHeight * 0.99}\n      >\n        Box Resize@goodseog.yoo\n      </text>\n      <DragBox\n        isDragging={isAdding}\n        x1={addStart.x}\n        y1={addStart.y}\n        x2={addEnd.x}\n        y2={addEnd.y}\n      />\n    </svg>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}